digraph PropertyScraperArchitecture {
  rankdir=TB;
  node [shape=box, style=rounded];

  browser_list [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLPADDING="2" CELLSPACING="0">
        <TR>
          <TD FIXEDSIZE="TRUE" WIDTH="20" HEIGHT="20"><IMG SRC="doc/architecture/chrome.png"/></TD>
          <TD>Web browser for property list scraping</TD>
        </TR>
      </TABLE>
    >,
    margin="0.08,0.05"
  ];
  listing_scraper [label="propertyListingScraper"];
  rabbitmq1 [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLPADDING="2" CELLSPACING="0">
        <TR>
          <TD FIXEDSIZE="TRUE" WIDTH="20" HEIGHT="20"><IMG SRC="doc/architecture/rabbitMq.png"/></TD>
          <TD ALIGN="LEFT">Rabbit<BR/>(property-listing-urls queue)</TD>
        </TR>
      </TABLE>
    >,
    margin="0.08,0.05"
  ];
  detail_scraper [label="propertyDetailScraper", group="detail_column"];
  mongodb [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLPADDING="2" CELLSPACING="0">
        <TR>
          <TD FIXEDSIZE="TRUE" WIDTH="20" HEIGHT="20"><IMG SRC="doc/architecture/mongoDB.png"/></TD>
          <TD>MongoDB</TD>
        </TR>
      </TABLE>
    >,
    group="detail_column",
    margin="0.08,0.05"
  ];
  browser_detail [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLPADDING="2" CELLSPACING="0">
        <TR>
          <TD FIXEDSIZE="TRUE" WIDTH="20" HEIGHT="20"><IMG SRC="doc/architecture/chrome.png"/></TD>
          <TD>Web browser for property detail scraping</TD>
        </TR>
      </TABLE>
    >,
    margin="0.08,0.05"
  ];

  { rank=same; browser_list; browser_detail; }
  { rank=same; listing_scraper; rabbitmq1; detail_scraper; }
  { rank=same; mongodb; }

  browser_list -> listing_scraper;
  browser_detail -> detail_scraper;
  listing_scraper -> rabbitmq1 [minlen=2];
  rabbitmq1 -> detail_scraper [minlen=2];

  listing_scraper -> browser_list [color=blue];
  detail_scraper -> browser_detail [color=blue];
  detail_scraper -> mongodb [minlen=2];
  mongodb -> detail_scraper [minlen=2];
}
